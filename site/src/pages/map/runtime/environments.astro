---
import DocsLayout from '../../../layouts/DocsLayout.astro';
import Callout from '../../../components/Callout';
import CodeBlock from '../../../components/CodeBlock';
import PageNavigation from '../../../components/PageNavigation.astro';
---

<DocsLayout
  title="Runtime 심화: 멀티 환경 운영"
  description="development/staging/production 환경을 분리해 운영 안정성을 높이는 방법"
  currentPath="/map/runtime/environments"
>
  <div class="max-w-4xl mx-auto px-6 py-8">
    <nav class="flex items-center gap-2 text-sm text-text-secondary mb-6" aria-label="현재 위치">
      <a href="/" class="hover:text-white transition-colors">홈</a>
      <span>/</span>
      <a href="/map" class="hover:text-white transition-colors">학습 사이클</a>
      <span>/</span>
      <a href="/map/runtime" class="hover:text-white transition-colors">Runtime</a>
      <span>/</span>
      <span class="text-primary font-medium">멀티 환경 운영</span>
    </nav>

    <header class="mb-8 pb-6 border-b border-border">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold mb-4">
        Runtime Deep Dive
      </div>
      <h1 class="text-3xl md:text-4xl font-black text-white mb-4">멀티 환경 운영</h1>
      <p class="text-text-secondary text-lg leading-relaxed">
        개발/스테이징/프로덕션 환경을 분리해 배포 사고를 줄이고, 변경 검증 흐름을 표준화합니다.
      </p>
    </header>

    <section class="mb-10">
      <Callout client:load variant="tip" title="핵심 원칙">
        <ul class="list-disc list-inside text-sm mt-2 space-y-1">
          <li>코드는 동일, 설정만 환경별로 분리</li>
          <li>프로덕션 값은 코드 저장소에 직접 보관 금지</li>
          <li>staging 검증 통과 후 production 반영</li>
        </ul>
      </Callout>
    </section>

    <article class="prose prose-invert max-w-none">
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4">환경별 파일 전략</h2>
        <CodeBlock
          client:load
          filename="env"
          code={`.env.development
.env.staging
.env.production
.env.example`}
        />
      </section>

      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4">배포 파이프라인 분리</h2>
        <ul class="list-disc list-inside text-text-secondary space-y-2">
          <li><strong class="text-white">development</strong>: 기능 개발/로컬 검증</li>
          <li><strong class="text-white">staging</strong>: 통합 테스트/QA</li>
          <li><strong class="text-white">production</strong>: 사용자 트래픽 처리</li>
        </ul>
      </section>

      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4">점검 체크포인트</h2>
        <ul class="list-disc list-inside text-text-secondary space-y-2">
          <li>환경별 API URL/DB URL 오염 여부</li>
          <li>민감키가 프론트 번들에 노출되지 않는지 확인</li>
          <li>staging 데이터와 production 데이터 분리 여부</li>
        </ul>
      </section>
    </article>

    <PageNavigation currentPath="/map/runtime/environments" />
  </div>
</DocsLayout>
