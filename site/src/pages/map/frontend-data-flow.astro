---
import DocsLayout from '../../layouts/DocsLayout.astro';
import Callout from '../../components/Callout';
import PageNavigation from '../../components/PageNavigation.astro';
---

<DocsLayout title="프론트엔드 데이터 흐름 기초" description="state, fetch, query/mutation, 캐시 무효화 개념" currentPath="/map/frontend-data-flow">
  <div class="max-w-4xl mx-auto px-6 py-8">
    <h1 class="text-3xl font-black text-white mb-4">프론트엔드 데이터 흐름 기초</h1>
    <p class="text-text-secondary mb-6">로컬 상태에서 API 연결 상태로 전환할 때 필요한 개념을 정리합니다.</p>

    <Callout client:load variant="tip" title="핵심 구분">
      <ul class="list-disc list-inside space-y-1 mt-2 text-sm">
        <li><strong>State</strong>: 화면 상태를 메모리에 보관</li>
        <li><strong>Query</strong>: 읽기 요청</li>
        <li><strong>Mutation</strong>: 생성/수정/삭제 요청</li>
        <li><strong>Invalidation</strong>: 변경 후 다시 조회하도록 캐시 갱신</li>
      </ul>
    </Callout>

    <article class="prose prose-invert max-w-none mt-8">
      <h2 class="text-2xl font-bold text-white mb-3">기본 흐름</h2>
      <ol class="list-decimal list-inside text-text-secondary space-y-1 mb-6">
        <li>페이지 진입 시 Query 실행</li>
        <li>사용자가 생성/수정 시 Mutation 실행</li>
        <li>성공 시 관련 Query invalidate</li>
        <li>최신 데이터 재조회 후 UI 반영</li>
      </ol>

      <Callout client:load variant="info" title="연결 단계에서 보기">
        <a href="/start/60min/connect" class="text-primary hover:underline">60분 챌린지 연결 단계</a>
      </Callout>
    </article>

    <PageNavigation currentPath="/map/frontend-data-flow" />
  </div>
</DocsLayout>
