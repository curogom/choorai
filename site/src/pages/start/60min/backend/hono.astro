---
import DocsLayout from '../../../../layouts/DocsLayout.astro';
import Stepper from '../../../../components/Stepper';
import ChallengeProgressBar from '../../../../components/ChallengeProgressBar';
import Checklist from '../../../../components/Checklist';
import CodeBlock from '../../../../components/CodeBlock';
import PromptBox from '../../../../components/PromptBox';
import Callout from '../../../../components/Callout';

const steps = [
  { label: 'ì‚¬ì „ ì¤€ë¹„', status: 'completed' as const },
  { label: 'í”„ë¡ íŠ¸ì—”ë“œ', status: 'completed' as const },
  { label: 'ë°±ì—”ë“œ', status: 'current' as const },
  { label: 'ì—°ê²°', status: 'upcoming' as const },
  { label: 'ë°°í¬', status: 'upcoming' as const },
  { label: 'ì™„ë£Œ', status: 'upcoming' as const },
];

const checklist = [
  { id: 'init', label: 'í”„ë¡œì íŠ¸ ì´ˆê¸°í™”', description: 'npm init -y' },
  { id: 'hono', label: 'Hono ì„¤ì¹˜', description: 'npm install hono @hono/node-server' },
  { id: 'server', label: 'ì„œë²„ ì‹¤í–‰', description: 'npx tsx src/index.ts' },
  { id: 'api', label: 'API ì—”ë“œí¬ì¸íŠ¸ ìƒì„±', description: 'CRUD êµ¬í˜„' },
];
---

<DocsLayout
  title="60ë¶„ ì™„ì£¼ - Hono ë°±ì—”ë“œ"
  description="Honoë¡œ Node.js ë°±ì—”ë“œë¥¼ ë§Œë“¤ì–´ë´…ì‹œë‹¤"
  currentPath="/start/60min/backend/hono"
>
  <div class="max-w-4xl mx-auto px-6 py-8">
    <!-- ë¸Œë ˆë“œí¬ëŸ¼ -->
    <nav class="flex items-center gap-2 text-sm text-text-secondary mb-6" aria-label="í˜„ì¬ ìœ„ì¹˜">
      <a href="/" class="hover:text-white transition-colors">í™ˆ</a>
      <span>/</span>
      <a href="/start/60min" class="hover:text-white transition-colors">60ë¶„ ì™„ì£¼</a>
      <span>/</span>
      <span class="text-text-secondary">ë°±ì—”ë“œ</span>
      <span>/</span>
      <span class="text-primary font-medium">Hono</span>
    </nav>

    <!-- ì§„í–‰ë¥  -->
    <div class="mb-8 p-4 bg-surface rounded-xl border border-border">
      <ChallengeProgressBar client:load />
    </div>

    <!-- ìŠ¤í… ì¸ë””ì¼€ì´í„° -->
    <div class="mb-12">
      <Stepper client:load steps={steps} />
    </div>

    <!-- í˜ì´ì§€ ì œëª© -->
    <header class="mb-8 pb-6 border-b border-border">
      <div class="flex items-center gap-3 mb-4">
        <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-primary/10 text-primary text-xs font-bold">
          <svg class="w-4 h-4" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M12 8v4l3 3m6-3a9 9 0 11-18 0 9 9 0 0118 0z" />
          </svg>
          15ë¶„
        </div>
        <span class="px-2 py-1 rounded bg-green-500/20 text-green-400 text-xs font-bold">Hono</span>
        <span class="px-2 py-1 rounded bg-blue-500/20 text-blue-400 text-xs font-bold">Lv.1 ì…ë¬¸</span>
      </div>
      <h1 class="text-3xl md:text-4xl font-black text-white mb-4">
        ë°±ì—”ë“œ: Hono
      </h1>
      <p class="text-text-secondary text-lg leading-relaxed">
        JavaScript/TypeScriptë¡œ ë°±ì—”ë“œë¥¼ ë§Œë“­ë‹ˆë‹¤.
        í”„ë¡ íŠ¸ì—”ë“œì™€ ê°™ì€ ì–¸ì–´ë¥¼ ì‚¬ìš©í•´ í•™ìŠµ ë¶€ë‹´ì´ ì ì–´ìš”.
      </p>
    </header>

    <!-- TL;DR -->
    <section class="mb-10">
      <Callout client:load variant="tip" title="TL;DR (3ì¤„ ìš”ì•½)">
        <ul class="list-disc list-inside space-y-1 mt-2">
          <li><code>npm install hono</code>ë¡œ ì„¤ì¹˜</li>
          <li>íŒŒì¼ í•˜ë‚˜ì— ì „ì²´ API ì‘ì„± ê°€ëŠ¥</li>
          <li>15ë¶„ ë§Œì— CRUD API ì™„ì„±</li>
        </ul>
      </Callout>
    </section>

    <!-- ì™œ Hono? -->
    <section class="mb-10">
      <Callout client:load variant="info" title="ì™œ Honoì¸ê°€?">
        <div class="mt-2 text-sm space-y-2">
          <p>HonoëŠ” <strong class="text-white">ê°€ì¥ ê°€ë²¼ìš´ Node.js ì›¹ í”„ë ˆì„ì›Œí¬</strong>ì…ë‹ˆë‹¤:</p>
          <ul class="list-disc list-inside space-y-1">
            <li>JavaScript/TypeScriptë¡œ í”„ë¡ íŠ¸ì—”ë“œì™€ ê°™ì€ ì–¸ì–´</li>
            <li>Expressë³´ë‹¤ ë¹ ë¥´ê³  í˜„ëŒ€ì </li>
            <li>ë³´ì¼ëŸ¬í”Œë ˆì´íŠ¸ ì½”ë“œê°€ ê±°ì˜ ì—†ìŒ</li>
            <li>Edge Runtime (Cloudflare Workers) ì§€ì›</li>
          </ul>
        </div>
      </Callout>
    </section>

    <!-- ë©”ì¸ ì½˜í…ì¸  -->
    <article class="prose prose-invert max-w-none">
      <!-- ì„¹ì…˜ 1: í”„ë¡œì íŠ¸ ìƒì„± -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
          <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-background text-sm font-bold">1</span>
          í”„ë¡œì íŠ¸ ìƒì„±
        </h2>

        <p class="text-text-secondary mb-4">
          í”„ë¡ íŠ¸ì—”ë“œ í´ë”(<code>my-todo</code>) ì˜†ì— ë°±ì—”ë“œ í´ë”ë¥¼ ë§Œë“­ë‹ˆë‹¤.
        </p>

        <CodeBlock
          client:load
          code={`# ìƒìœ„ í´ë”ë¡œ ì´ë™ (my-todo í´ë”ê°€ ìˆëŠ” ê³³)
cd ..

# ë°±ì—”ë“œ í´ë” ìƒì„±
mkdir my-todo-api
cd my-todo-api

# í”„ë¡œì íŠ¸ ì´ˆê¸°í™”
npm init -y

# Hono ì„¤ì¹˜
npm install hono @hono/node-server

# TypeScript ì„¤ì¹˜ (ì„ íƒ)
npm install -D typescript @types/node tsx`}
          filename="í„°ë¯¸ë„"
        />
      </section>

      <!-- ì„¹ì…˜ 2: ì²« API ì‘ì„± -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
          <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-background text-sm font-bold">2</span>
          ì²« API ì‘ì„±
        </h2>

        <p class="text-text-secondary mb-4">
          <code>src/index.ts</code> íŒŒì¼ì„ ë§Œë“¤ê³  ì•„ë˜ ì½”ë“œë¥¼ ì…ë ¥í•˜ì„¸ìš”.
        </p>

        <CodeBlock
          client:load
          code={`import { Hono } from 'hono';
import { serve } from '@hono/node-server';
import { cors } from 'hono/cors';

const app = new Hono();

// CORS ì„¤ì • (í”„ë¡ íŠ¸ì—”ë“œ ì—°ê²°ìš©)
app.use('*', cors({
  origin: ['http://localhost:5173'],
  credentials: true,
}));

// Health check
app.get('/health', (c) => {
  return c.json({ status: 'ok' });
});

// Hello API
app.get('/api/hello', (c) => {
  const name = c.req.query('name') || 'World';
  return c.json({ message: \`Hello, \${name}!\` });
});

// ì„œë²„ ì‹œì‘
serve({ fetch: app.fetch, port: 8000 });
console.log('ğŸš€ Server running on http://localhost:8000');`}
          filename="src/index.ts"
        />

        <h3 class="text-lg font-bold text-white mt-6 mb-3">ì„œë²„ ì‹¤í–‰</h3>

        <CodeBlock
          client:load
          code={`# ì„œë²„ ì‹¤í–‰
npx tsx src/index.ts

# í…ŒìŠ¤íŠ¸ (ìƒˆ í„°ë¯¸ë„ì—ì„œ)
curl http://localhost:8000/health
curl http://localhost:8000/api/hello?name=Choorai`}
          filename="í„°ë¯¸ë„"
        />

        <div class="mt-4 p-4 bg-green-500/10 border border-green-500/30 rounded-lg">
          <div class="flex items-center gap-2 text-green-400 font-bold mb-2">
            <svg class="w-5 h-5" fill="currentColor" viewBox="0 0 24 24">
              <path d="M9 16.17L4.83 12l-1.42 1.41L9 19 21 7l-1.41-1.41L9 16.17z"/>
            </svg>
            ì„±ê³µ!
          </div>
          <p class="text-green-300/80 text-sm">
            <code>{`{"status": "ok"}`}</code>ê°€ ë³´ì´ë©´ ì„œë²„ê°€ ì •ìƒ ì‹¤í–‰ ì¤‘ì…ë‹ˆë‹¤.
          </p>
        </div>
      </section>

      <!-- ì„¹ì…˜ 3: CRUD API -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
          <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-background text-sm font-bold">3</span>
          í•  ì¼ CRUD API
        </h2>

        <p class="text-text-secondary mb-4">
          ì´ì œ í•  ì¼ ê´€ë¦¬ APIë¥¼ ì¶”ê°€í•©ë‹ˆë‹¤. AIì—ê²Œ ì•„ë˜ í”„ë¡¬í”„íŠ¸ë¡œ ìš”ì²­í•˜ì„¸ìš”.
        </p>

        <PromptBox
          client:load
          prompt={`Honoë¡œ Todo CRUD APIë¥¼ ë§Œë“¤ì–´ì¤˜.

ìš”êµ¬ì‚¬í•­:
1. ì¸ë©”ëª¨ë¦¬ ì €ì¥ì†Œ (Map ì‚¬ìš©)
2. Todo íƒ€ì…: id, title, is_completed, created_at
3. API ì—”ë“œí¬ì¸íŠ¸:
   - GET /api/v1/todos - ëª©ë¡ (page, page_size ì¿¼ë¦¬)
   - POST /api/v1/todos - ìƒì„± (title í•„ìˆ˜)
   - GET /api/v1/todos/:id - ë‹¨ê±´ ì¡°íšŒ
   - PATCH /api/v1/todos/:id - ìˆ˜ì • (is_completed í† ê¸€)
   - DELETE /api/v1/todos/:id - ì‚­ì œ
4. ì…ë ¥ ê²€ì¦ (ë¹ˆ ì œëª© ê±°ë¶€)
5. ì—ëŸ¬ ì‘ë‹µ ì²˜ë¦¬

ê¸°ì¡´ ì½”ë“œì— ì¶”ê°€í•´ì¤˜.`}
          title="AI í”„ë¡¬í”„íŠ¸"
          description="Antigravityë‚˜ ChatGPTì— ìš”ì²­í•˜ì„¸ìš”."
        />

        <h3 class="text-lg font-bold text-white mt-6 mb-3">ì˜ˆìƒ ê²°ê³¼ API</h3>

        <CodeBlock
          client:load
          code={`# í•  ì¼ ìƒì„±
curl -X POST http://localhost:8000/api/v1/todos \\
  -H "Content-Type: application/json" \\
  -d '{"title": "Hono ë°°ìš°ê¸°"}'

# í•  ì¼ ëª©ë¡
curl http://localhost:8000/api/v1/todos

# ì™„ë£Œ ì²˜ë¦¬
curl -X PATCH http://localhost:8000/api/v1/todos/1 \\
  -H "Content-Type: application/json" \\
  -d '{"is_completed": true}'

# ì‚­ì œ
curl -X DELETE http://localhost:8000/api/v1/todos/1`}
          filename="í„°ë¯¸ë„"
        />
      </section>

      <!-- ì„¹ì…˜ 4: í´ë” êµ¬ì¡° -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4 flex items-center gap-2">
          <span class="flex items-center justify-center w-8 h-8 rounded-full bg-primary text-background text-sm font-bold">4</span>
          ìµœì¢… í´ë” êµ¬ì¡°
        </h2>

        <CodeBlock
          client:load
          code={`my-todo-api/
â”œâ”€â”€ src/
â”‚   â”œâ”€â”€ index.ts      # ì§„ì…ì  + ë¼ìš°í„°
â”‚   â”œâ”€â”€ types/
â”‚   â”‚   â””â”€â”€ index.ts  # Todo íƒ€ì… ì •ì˜
â”‚   â””â”€â”€ storage/
â”‚       â””â”€â”€ index.ts  # ì¸ë©”ëª¨ë¦¬ ì €ì¥ì†Œ
â”œâ”€â”€ package.json
â””â”€â”€ tsconfig.json     # (ì„ íƒ)`}
          filename="í´ë” êµ¬ì¡°"
        />

        <p class="text-text-secondary mt-4 text-sm">
          ì™„ì„±ëœ ì˜ˆì œ ì½”ë“œëŠ”
          <a href="https://github.com/curogom/choorai/tree/main/examples/b2c-todo/api-hono" class="text-primary hover:underline">
            GitHub ì €ì¥ì†Œ
          </a>ì—ì„œ í™•ì¸í•  ìˆ˜ ìˆìŠµë‹ˆë‹¤.
        </p>
      </section>

      <!-- FastAPI vs Hono -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4">FastAPI vs Hono</h2>

        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-border">
                <th class="text-left py-3 px-2 text-white">í•­ëª©</th>
                <th class="text-left py-3 px-2 text-white">Hono</th>
                <th class="text-left py-3 px-2 text-white">FastAPI</th>
              </tr>
            </thead>
            <tbody class="text-text-secondary">
              <tr class="border-b border-border/50">
                <td class="py-3 px-2">ì–¸ì–´</td>
                <td class="py-3 px-2 text-green-400">JavaScript/TypeScript</td>
                <td class="py-3 px-2">Python</td>
              </tr>
              <tr class="border-b border-border/50">
                <td class="py-3 px-2">í”„ë¡ íŠ¸ì—”ë“œì™€ í†µì¼</td>
                <td class="py-3 px-2 text-green-400">âœ… ê°™ì€ ì–¸ì–´</td>
                <td class="py-3 px-2">âŒ ë‹¤ë¥¸ ì–¸ì–´</td>
              </tr>
              <tr class="border-b border-border/50">
                <td class="py-3 px-2">ìë™ ë¬¸ì„œí™”</td>
                <td class="py-3 px-2">âŒ</td>
                <td class="py-3 px-2 text-green-400">âœ… /docs</td>
              </tr>
              <tr>
                <td class="py-3 px-2">ì¶”ì²œ ìƒí™©</td>
                <td class="py-3 px-2">JSë§Œ ì•Œ ë•Œ, ë¹ ë¥¸ ì‹œì‘</td>
                <td class="py-3 px-2">Python ì„ í˜¸, ML ì—°ë™</td>
              </tr>
            </tbody>
          </table>
        </div>
      </section>

      <!-- ì²´í¬ë¦¬ìŠ¤íŠ¸ -->
      <section class="mb-10">
        <Checklist
          client:load
          storageKey="60min-backend-hono"
          title="Hono ë°±ì—”ë“œ ì™„ë£Œ ì²´í¬ë¦¬ìŠ¤íŠ¸"
          items={checklist}
        />
      </section>

      <!-- ë„¤ë¹„ê²Œì´ì…˜ -->
      <nav class="flex items-center justify-between pt-8 border-t border-border" aria-label="í˜ì´ì§€ ì´ë™">
        <a
          href="/start/60min/frontend/vue"
          class="group flex items-center gap-3 px-4 py-2 rounded-lg border border-border hover:bg-surface transition-colors no-underline"
        >
          <svg class="w-5 h-5 text-text-secondary group-hover:-translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M15 19l-7-7 7-7" />
          </svg>
          <div class="text-left">
            <span class="text-xs text-text-secondary">ì´ì „</span>
            <span class="block text-sm text-white font-medium">Vue í”„ë¡ íŠ¸ì—”ë“œ</span>
          </div>
        </a>

        <a
          href="/start/60min/connect"
          class="group flex items-center gap-3 px-4 py-2 rounded-lg bg-primary hover:bg-primary-hover text-background transition-colors no-underline"
        >
          <div class="text-right">
            <span class="text-xs opacity-70">ë‹¤ìŒ ë‹¨ê³„</span>
            <span class="block text-sm font-bold">í”„ë¡ íŠ¸ + ë°±ì—”ë“œ ì—°ê²°</span>
          </div>
          <svg class="w-5 h-5 group-hover:translate-x-1 transition-transform" fill="none" stroke="currentColor" viewBox="0 0 24 24">
            <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 5l7 7-7 7" />
          </svg>
        </a>
      </nav>
    </article>
  </div>
</DocsLayout>
