---
import DocsLayout from '../../../layouts/DocsLayout.astro';
import Callout from '../../../components/Callout';
import CodeBlock from '../../../components/CodeBlock';
import Checklist from '../../../components/Checklist';
import SectionHeader from '../../../components/SectionHeader';
import MetaBadge from '../../../components/MetaBadge';
import PageNavigation from '../../../components/PageNavigation.astro';

const deployChecklist = [
  { id: 'github', label: 'Push code to GitHub', description: 'git push origin main' },
  { id: 'vercel', label: 'Create Vercel account', description: 'vercel.com' },
  { id: 'connect', label: 'Connect GitHub', description: 'Link repository in Vercel' },
  { id: 'deploy', label: 'Deploy complete', description: 'Verify automatic deployment' },
  { id: 'domain', label: 'Custom domain (optional)', description: 'Connect your own domain' },
];
---

<DocsLayout
  lang="en"
  title="Vercel Deployment Guide"
  description="How to deploy React/Vite/Next.js apps to Vercel for free"
  currentPath="/deploy/vercel"
>
  <div class="max-w-4xl mx-auto px-6 py-8">
    <nav class="flex items-center gap-2 text-sm text-text-secondary mb-6" aria-label="Breadcrumb">
      <a href="/en" class="hover:text-white transition-colors">Home</a>
      <span>/</span>
      <a href="/en/deploy" class="hover:text-white transition-colors">Deploy</a>
      <span>/</span>
      <span class="text-primary font-medium">Vercel</span>
    </nav>

    <header class="mb-8 pb-6 border-b border-border">
      <div class="inline-flex items-center gap-2 px-3 py-1 rounded-full bg-black/80 text-white text-xs font-bold mb-4">
        Free Hosting
      </div>
      <h1 class="text-3xl md:text-4xl font-black text-white mb-4">
        Deploy with Vercel
      </h1>
      <p class="text-text-secondary text-lg leading-relaxed">
        Deploy frontend apps for free on Vercel, the creators of Next.js.
        Automatic deployment every time you push via GitHub integration.
      </p>
    </header>

    <section class="mb-8">
      <Callout client:load locale="en" variant="tip" title="Why Vercel?">
        <ul class="list-disc list-inside space-y-1 mt-2">
          <li>Next.js optimized (official platform)</li>
          <li>Free tier: 100GB bandwidth/month</li>
          <li>Automatic HTTPS, global Edge Network</li>
          <li>Preview Deployments (preview per PR)</li>
          <li>Serverless/Edge Functions support</li>
        </ul>
      </Callout>
    </section>

    <article class="prose prose-invert max-w-none">
      <!-- Step 1 -->
      <section class="mb-10">
        <SectionHeader number={1} title="Push Code to GitHub" />

        <p class="text-text-secondary mb-4">
          Your code must be in a GitHub repository to deploy.
        </p>

        <CodeBlock
          client:load
          code={`# Initialize repository (if first time)
git init

# Add files
git add .

# Commit
git commit -m "Initial commit"

# Connect GitHub repository (if first time)
git remote add origin https://github.com/username/my-project.git

# Push
git push -u origin main`}
          filename="Terminal"
        />

        <Callout client:load locale="en" variant="info">
          <p>
            If you don't have a GitHub repository, create one at <a href="https://github.com/new" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">github.com/new</a>.
          </p>
        </Callout>
      </section>

      <!-- Step 2 -->
      <section class="mb-10">
        <SectionHeader number={2} title="Configure Vercel" />

        <ol class="list-decimal list-inside text-text-secondary space-y-4">
          <li>
            <a href="https://vercel.com/signup" target="_blank" rel="noopener noreferrer" class="text-primary hover:underline">
              Sign up for Vercel
            </a> (free, recommended to log in with GitHub)
          </li>
          <li>Click <strong class="text-white">Add New...</strong> → <strong class="text-white">Project</strong> in the dashboard</li>
          <li>Select repository from <strong class="text-white">Import Git Repository</strong></li>
          <li>Framework is automatically detected</li>
        </ol>

        <div class="mt-6 p-4 bg-surface border border-border rounded-xl">
          <h3 class="text-white font-bold mb-3">Build Settings (by framework)</h3>

          <div class="space-y-4">
            <div>
              <h4 class="text-sm font-bold text-primary mb-2">React + Vite</h4>
              <ul class="text-text-secondary text-sm space-y-1">
                <li>Framework Preset: <code class="bg-background px-1 rounded">Vite</code></li>
                <li>Build Command: <code class="bg-background px-1 rounded">npm run build</code></li>
                <li>Output Directory: <code class="bg-background px-1 rounded">dist</code></li>
              </ul>
            </div>

            <div>
              <h4 class="text-sm font-bold text-primary mb-2">Next.js</h4>
              <ul class="text-text-secondary text-sm space-y-1">
                <li>Framework Preset: <code class="bg-background px-1 rounded">Next.js</code> (auto-detected)</li>
                <li>Build Command: <code class="bg-background px-1 rounded">npm run build</code></li>
                <li>Output Directory: <code class="bg-background px-1 rounded">.next</code> (automatic)</li>
              </ul>
            </div>

            <div>
              <h4 class="text-sm font-bold text-primary mb-2">Vue + Vite</h4>
              <ul class="text-text-secondary text-sm space-y-1">
                <li>Framework Preset: <code class="bg-background px-1 rounded">Vite</code></li>
                <li>Build Command: <code class="bg-background px-1 rounded">npm run build</code></li>
                <li>Output Directory: <code class="bg-background px-1 rounded">dist</code></li>
              </ul>
            </div>
          </div>
        </div>
      </section>

      <!-- Step 3 -->
      <section class="mb-10">
        <SectionHeader number={3} title="Environment Variables (if needed)" />

        <p class="text-text-secondary mb-4">
          Set values that vary by environment, such as API URLs, as environment variables.
        </p>

        <ol class="list-decimal list-inside text-text-secondary space-y-2 mb-4">
          <li>Project → <strong class="text-white">Settings</strong></li>
          <li><strong class="text-white">Environment Variables</strong> tab</li>
          <li>Add variable (e.g., <code class="bg-surface px-1 rounded">VITE_API_URL</code>)</li>
          <li>Can select Production / Preview / Development environments</li>
        </ol>

        <CodeBlock
          client:load
          code={`# Example environment variables
VITE_API_URL=https://api.myapp.com
NEXT_PUBLIC_API_URL=https://api.myapp.com`}
          filename="Environment Variables"
        />

        <Callout client:load locale="en" variant="info">
          <p>
            Vite requires the <code class="bg-surface px-1 rounded">VITE_</code> prefix, and Next.js requires the <code class="bg-surface px-1 rounded">NEXT_PUBLIC_</code> prefix.
            See <a href="/en/troubleshooting/env" class="text-primary hover:underline">Fixing Environment Variable Errors</a> for details.
          </p>
        </Callout>
      </section>

      <!-- Step 4 -->
      <section class="mb-10">
        <SectionHeader number={4} title="Custom Domain (optional)" />

        <p class="text-text-secondary mb-4">
          A default <code class="bg-surface px-1 rounded">project-name.vercel.app</code> domain is provided.
          Additional configuration is needed to use your own domain.
        </p>

        <ol class="list-decimal list-inside text-text-secondary space-y-2 mb-4">
          <li>Project → <strong class="text-white">Settings</strong> → <strong class="text-white">Domains</strong></li>
          <li>Enter domain (e.g., <code class="bg-surface px-1 rounded">myapp.com</code>)</li>
          <li>Add A or CNAME record following DNS setup instructions</li>
          <li>SSL certificate is automatically issued</li>
        </ol>

        <Callout client:load locale="en" variant="tip">
          <p>
            If you purchase a domain directly from Vercel, DNS is configured automatically.
            For external domains, changing nameservers to Vercel is convenient.
          </p>
        </Callout>
      </section>

      <!-- Comparison table -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4">Vercel vs Cloudflare Pages</h2>

        <div class="overflow-x-auto">
          <table class="w-full text-sm">
            <thead>
              <tr class="border-b border-border">
                <th class="text-left py-3 px-4 text-white">Feature</th>
                <th class="text-left py-3 px-4 text-white">Vercel</th>
                <th class="text-left py-3 px-4 text-white">Cloudflare Pages</th>
              </tr>
            </thead>
            <tbody>
              <tr class="border-b border-border/50">
                <td class="py-3 px-4 text-text-secondary">Free Bandwidth</td>
                <td class="py-3 px-4">100GB/month</td>
                <td class="py-3 px-4 text-success">Unlimited</td>
              </tr>
              <tr class="border-b border-border/50">
                <td class="py-3 px-4 text-text-secondary">Build Time</td>
                <td class="py-3 px-4 text-success">6,000 min/month</td>
                <td class="py-3 px-4">500 builds/month</td>
              </tr>
              <tr class="border-b border-border/50">
                <td class="py-3 px-4 text-text-secondary">Edge Functions</td>
                <td class="py-3 px-4">Limited (free)</td>
                <td class="py-3 px-4 text-success">Workers free</td>
              </tr>
              <tr class="border-b border-border/50">
                <td class="py-3 px-4 text-text-secondary">Next.js Support</td>
                <td class="py-3 px-4 text-success">Optimized (official)</td>
                <td class="py-3 px-4">Possible (adapter required)</td>
              </tr>
              <tr class="border-b border-border/50">
                <td class="py-3 px-4 text-text-secondary">Preview Deployments</td>
                <td class="py-3 px-4 text-success">Auto per PR</td>
                <td class="py-3 px-4 text-success">Auto per PR</td>
              </tr>
              <tr>
                <td class="py-3 px-4 text-text-secondary">Recommended For</td>
                <td class="py-3 px-4"><strong class="text-white">Next.js, Full-stack</strong></td>
                <td class="py-3 px-4"><strong class="text-white">Static sites, SPAs</strong></td>
              </tr>
            </tbody>
          </table>
        </div>

        <Callout client:load locale="en" variant="info" title="Which one should you choose?">
          <ul class="list-disc list-inside space-y-1 mt-2">
            <li><strong class="text-white">Using Next.js</strong> → Vercel recommended (optimized)</li>
            <li><strong class="text-white">Vite + React/Vue SPA</strong> → Both OK (Cloudflare has unlimited bandwidth advantage)</li>
            <li><strong class="text-white">Edge Workers usage</strong> → Cloudflare recommended</li>
          </ul>
        </Callout>
      </section>

      <!-- Checklist -->
      <section class="mb-10">
        <Checklist
          client:load
          locale="en"
          storageKey="deploy-vercel"
          title="Deployment Checklist"
          items={deployChecklist}
        />
      </section>

      <!-- Post-deploy -->
      <section class="mb-10">
        <h2 class="text-2xl font-bold text-white mb-4">Deployment Complete!</h2>

        <div class="p-6 bg-success/10 border border-success/30 rounded-xl">
          <div class="flex items-center gap-3 mb-4">
            <svg class="w-8 h-8 text-success" fill="none" stroke="currentColor" viewBox="0 0 24 24">
              <path stroke-linecap="round" stroke-linejoin="round" stroke-width="2" d="M9 12l2 2 4-4m6 2a9 9 0 11-18 0 9 9 0 0118 0z" />
            </svg>
            <h3 class="text-white font-bold text-xl">Congratulations!</h3>
          </div>
          <p class="text-text-secondary">
            Your app will now automatically deploy every time you push code to GitHub.
            Check it at <code class="bg-background px-1 rounded">project-name.vercel.app</code>.
          </p>
        </div>
      </section>
    </article>

    <PageNavigation currentPath="/deploy/vercel" />
  </div>
</DocsLayout>
